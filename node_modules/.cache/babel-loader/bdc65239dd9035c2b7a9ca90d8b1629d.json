{"ast":null,"code":"import _objectSpread from\"/Users/silvananggia/Documents/Hell/HellLab/HippoNFT/hippofamilynft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/silvananggia/Documents/Hell/HellLab/HippoNFT/hippofamilynft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/silvananggia/Documents/Hell/HellLab/HippoNFT/hippofamilynft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/silvananggia/Documents/Hell/HellLab/HippoNFT/hippofamilynft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/silvananggia/Documents/Hell/HellLab/HippoNFT/hippofamilynft/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import{useEffect,useState}from\"react\";import styled from\"styled-components\";import Countdown from\"react-countdown\";import{Button,CircularProgress,Snackbar}from\"@material-ui/core\";import Alert from\"@material-ui/lab/Alert\";import{LAMPORTS_PER_SOL}from\"@solana/web3.js\";import{useAnchorWallet}from\"@solana/wallet-adapter-react\";import{WalletDialogButton}from\"@solana/wallet-adapter-material-ui\";import{awaitTransactionSignatureConfirmation,getCandyMachineState,mintOneToken,shortenAddress}from\"./candy-machine\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var ConnectButton=styled(WalletDialogButton)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nfont-family: \\\"Balsamiq Sans\\\";\\ntext-transform: uppercase;\\ncolor: #fff;\\nbackground-color: #5ca9fb;\\nbackground-image: linear-gradient(to right, #5ca9fb 0%, #6372ff 100%);\\npadding: 14px 34px;\\nletter-spacing: 1px;\\nmargin: 0;\\nfont-size: 48px;\\nfont-weight: 500;\\nborder-radius: 25px;\\ntransition: all 0.5s linear;\\nborder: 0;\\n\"])));var CounterText=styled.span(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\n\"])));// add your styles here\nvar MintContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\"])));// add your styles here\nvar MintButton=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\nfont-family: \\\"Balsamiq Sans\\\";\\ntext-transform: uppercase;\\ncolor: #fff;\\nbackground-color: #5ca9fb;\\nbackground-image: linear-gradient(to right, #5ca9fb 0%, #6372ff 100%);\\npadding: 14px 34px;\\nletter-spacing: 1px;\\nmargin: 0;\\nfont-size: 48px;\\nfont-weight: 500;\\nborder-radius: 25px;\\ntransition: all 0.5s linear;\\nborder: 0;\"])));// add your styles here\nvar Home=function Home(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),balance=_useState2[0],setBalance=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isActive=_useState4[0],setIsActive=_useState4[1];// true when countdown completes\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSoldOut=_useState6[0],setIsSoldOut=_useState6[1];// true when items remaining is zero\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isMinting=_useState8[0],setIsMinting=_useState8[1];// true when user got to press MINT\nvar _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),itemsAvailable=_useState10[0],setItemsAvailable=_useState10[1];//const [itemsRedeemed, setItemsRedeemed] = useState(0);\nvar _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),itemsRemaining=_useState12[0],setItemsRemaining=_useState12[1];var _useState13=useState({open:false,message:\"\",severity:undefined}),_useState14=_slicedToArray(_useState13,2),alertState=_useState14[0],setAlertState=_useState14[1];var _useState15=useState(new Date(props.startDate)),_useState16=_slicedToArray(_useState15,2),startDate=_useState16[0],setStartDate=_useState16[1];var wallet=useAnchorWallet();var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),candyMachine=_useState18[0],setCandyMachine=_useState18[1];var onMint=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var mintTxId,status,message,_balance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setIsMinting(true);if(!(wallet&&(candyMachine===null||candyMachine===void 0?void 0:candyMachine.program))){_context.next=10;break;}_context.next=5;return mintOneToken(candyMachine,props.config,wallet.publicKey,props.treasury);case 5:mintTxId=_context.sent;_context.next=8;return awaitTransactionSignatureConfirmation(mintTxId,props.txTimeout,props.connection,\"singleGossip\",false);case 8:status=_context.sent;if(!(status===null||status===void 0?void 0:status.err)){setAlertState({open:true,message:\"Congratulations! Mint succeeded!\",severity:\"success\"});}else{setAlertState({open:true,message:\"Mint failed! Please try again!\",severity:\"error\"});}case 10:_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);// TODO: blech:\nmessage=_context.t0.msg||\"Minting failed! Please try again!\";if(!_context.t0.msg){if(_context.t0.message.indexOf(\"0x138\")){}else if(_context.t0.message.indexOf(\"0x137\")){message=\"SOLD OUT!\";}else if(_context.t0.message.indexOf(\"0x135\")){message=\"Insufficient funds to mint. Please fund your wallet.\";}}else{if(_context.t0.code===311){message=\"SOLD OUT!\";setIsSoldOut(true);}else if(_context.t0.code===312){message=\"Minting period hasn't started yet.\";}}setAlertState({open:true,message:message,severity:\"error\"});case 17:_context.prev=17;if(!wallet){_context.next=23;break;}_context.next=21;return props.connection.getBalance(wallet.publicKey);case 21:_balance=_context.sent;setBalance(_balance/LAMPORTS_PER_SOL);case 23:setIsMinting(false);setIsActive(false);return _context.finish(17);case 26:case\"end\":return _context.stop();}}},_callee,null,[[0,12,17,26]]);}));return function onMint(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _balance2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!wallet){_context2.next=5;break;}_context2.next=3;return props.connection.getBalance(wallet.publicKey);case 3:_balance2=_context2.sent;setBalance(_balance2/LAMPORTS_PER_SOL);case 5:case\"end\":return _context2.stop();}}},_callee2);}))();},[wallet,props.connection]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _yield$getCandyMachin,candyMachine,goLiveDate,itemsAvailable,itemsRemaining;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(wallet){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:_context3.next=4;return getCandyMachineState(wallet,props.candyMachineId,props.connection);case 4:_yield$getCandyMachin=_context3.sent;candyMachine=_yield$getCandyMachin.candyMachine;goLiveDate=_yield$getCandyMachin.goLiveDate;itemsAvailable=_yield$getCandyMachin.itemsAvailable;itemsRemaining=_yield$getCandyMachin.itemsRemaining;setItemsAvailable(itemsAvailable);setItemsRemaining(itemsRemaining);//setItemsRedeemed(itemsRedeemed);\nsetIsActive(false);setIsSoldOut(itemsRemaining===0);setStartDate(goLiveDate);setCandyMachine(candyMachine);case 15:case\"end\":return _context3.stop();}}},_callee3);}))();},[wallet,props.candyMachineId,props.connection]);return/*#__PURE__*/_jsxs(\"main\",{children:[wallet&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Wallet \",shortenAddress(wallet.publicKey.toBase58()||\"\")]}),wallet&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Balance: \",(balance||0).toLocaleString(),\" SOL\"]}),wallet&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Available: \",itemsRemaining,\" / \",itemsAvailable]}),/*#__PURE__*/_jsx(MintContainer,{children:!wallet?/*#__PURE__*/_jsx(ConnectButton,{children:\"Connect Wallet\"}):/*#__PURE__*/_jsx(MintButton,{disabled:isSoldOut||isMinting||!isActive,onClick:onMint,variant:\"contained\",children:isSoldOut?\"SOLD OUT\":isActive?isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):\"MINT\":/*#__PURE__*/_jsx(Countdown,{date:startDate,onMount:function onMount(_ref4){var completed=_ref4.completed;return completed&&setIsActive(true);},onComplete:function onComplete(){return setIsActive(true);},renderer:renderCounter})})}),/*#__PURE__*/_jsx(Snackbar,{open:alertState.open,autoHideDuration:6000,onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},children:/*#__PURE__*/_jsx(Alert,{onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},severity:alertState.severity,children:alertState.message})})]});};var renderCounter=function renderCounter(_ref5){var days=_ref5.days,hours=_ref5.hours,minutes=_ref5.minutes,seconds=_ref5.seconds,completed=_ref5.completed;return/*#__PURE__*/_jsxs(CounterText,{children:[days,\" Days ,\",hours,\" hours, \",minutes,\" minutes, \",seconds,\" seconds\"]});};export default Home;","map":{"version":3,"sources":["/Users/silvananggia/Documents/Hell/HellLab/HippoNFT/hippofamilynft/src/Home.tsx"],"names":["useEffect","useState","styled","Countdown","Button","CircularProgress","Snackbar","Alert","LAMPORTS_PER_SOL","useAnchorWallet","WalletDialogButton","awaitTransactionSignatureConfirmation","getCandyMachineState","mintOneToken","shortenAddress","ConnectButton","CounterText","span","MintContainer","div","MintButton","Home","props","balance","setBalance","isActive","setIsActive","isSoldOut","setIsSoldOut","isMinting","setIsMinting","itemsAvailable","setItemsAvailable","itemsRemaining","setItemsRemaining","open","message","severity","undefined","alertState","setAlertState","Date","startDate","setStartDate","wallet","candyMachine","setCandyMachine","onMint","program","config","publicKey","treasury","mintTxId","txTimeout","connection","status","err","msg","indexOf","code","getBalance","candyMachineId","goLiveDate","toBase58","toLocaleString","completed","renderCounter","days","hours","minutes","seconds"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Countdown from \"react-countdown\";\nimport { Button, CircularProgress, Snackbar } from \"@material-ui/core\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nimport * as anchor from \"@project-serum/anchor\";\n\nimport { LAMPORTS_PER_SOL } from \"@solana/web3.js\";\n\nimport { useAnchorWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletDialogButton } from \"@solana/wallet-adapter-material-ui\";\n\nimport {\n  CandyMachine,\n  awaitTransactionSignatureConfirmation,\n  getCandyMachineState,\n  mintOneToken,\n  shortenAddress,\n} from \"./candy-machine\";\n\nconst ConnectButton = styled(WalletDialogButton)`\nfont-family: \"Balsamiq Sans\";\ntext-transform: uppercase;\ncolor: #fff;\nbackground-color: #5ca9fb;\nbackground-image: linear-gradient(to right, #5ca9fb 0%, #6372ff 100%);\npadding: 14px 34px;\nletter-spacing: 1px;\nmargin: 0;\nfont-size: 48px;\nfont-weight: 500;\nborder-radius: 25px;\ntransition: all 0.5s linear;\nborder: 0;\n`;\n\nconst CounterText = styled.span`\n\n`; // add your styles here\n\nconst MintContainer = styled.div`\n`; // add your styles here\n\nconst MintButton = styled(Button)`\nfont-family: \"Balsamiq Sans\";\ntext-transform: uppercase;\ncolor: #fff;\nbackground-color: #5ca9fb;\nbackground-image: linear-gradient(to right, #5ca9fb 0%, #6372ff 100%);\npadding: 14px 34px;\nletter-spacing: 1px;\nmargin: 0;\nfont-size: 48px;\nfont-weight: 500;\nborder-radius: 25px;\ntransition: all 0.5s linear;\nborder: 0;`; // add your styles here\n\nexport interface HomeProps {\n  candyMachineId: anchor.web3.PublicKey;\n  config: anchor.web3.PublicKey;\n  connection: anchor.web3.Connection;\n  startDate: number;\n  treasury: anchor.web3.PublicKey;\n  txTimeout: number;\n}\n\nconst Home = (props: HomeProps) => {\n  const [balance, setBalance] = useState<number>();\n  const [isActive, setIsActive] = useState(false); // true when countdown completes\n  const [isSoldOut, setIsSoldOut] = useState(false); // true when items remaining is zero\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\n\n  const [itemsAvailable, setItemsAvailable] = useState(0);\n  //const [itemsRedeemed, setItemsRedeemed] = useState(0);\n  const [itemsRemaining, setItemsRemaining] = useState(0);\n\n  const [alertState, setAlertState] = useState<AlertState>({\n    open: false,\n    message: \"\",\n    severity: undefined,\n  });\n\n  const [startDate, setStartDate] = useState(new Date(props.startDate));\n\n  const wallet = useAnchorWallet();\n  const [candyMachine, setCandyMachine] = useState<CandyMachine>();\n\n  const onMint = async () => {\n    try {\n      setIsMinting(true);\n      if (wallet && candyMachine?.program) {\n        const mintTxId = await mintOneToken(\n          candyMachine,\n          props.config,\n          wallet.publicKey,\n          props.treasury\n        );\n\n        const status = await awaitTransactionSignatureConfirmation(\n          mintTxId,\n          props.txTimeout,\n          props.connection,\n          \"singleGossip\",\n          false\n        );\n\n        if (!status?.err) {\n          setAlertState({\n            open: true,\n            message: \"Congratulations! Mint succeeded!\",\n            severity: \"success\",\n          });\n        } else {\n          setAlertState({\n            open: true,\n            message: \"Mint failed! Please try again!\",\n            severity: \"error\",\n          });\n        }\n      }\n    } catch (error: any) {\n      // TODO: blech:\n      let message = error.msg || \"Minting failed! Please try again!\";\n      if (!error.msg) {\n        if (error.message.indexOf(\"0x138\")) {\n        } else if (error.message.indexOf(\"0x137\")) {\n          message = `SOLD OUT!`;\n        } else if (error.message.indexOf(\"0x135\")) {\n          message = `Insufficient funds to mint. Please fund your wallet.`;\n        }\n      } else {\n        if (error.code === 311) {\n          message = `SOLD OUT!`;\n          setIsSoldOut(true);\n        } else if (error.code === 312) {\n          message = `Minting period hasn't started yet.`;\n        }\n      }\n\n      setAlertState({\n        open: true,\n        message,\n        severity: \"error\",\n      });\n    } finally {\n      if (wallet) {\n        const balance = await props.connection.getBalance(wallet.publicKey);\n        setBalance(balance / LAMPORTS_PER_SOL);\n      }\n      setIsMinting(false);\n      setIsActive(false);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (wallet) {\n        const balance = await props.connection.getBalance(wallet.publicKey);\n        setBalance(balance / LAMPORTS_PER_SOL);\n      }\n    })();\n  }, [wallet, props.connection]);\n\n  useEffect(() => {\n    (async () => {\n      if (!wallet) return;\n\n      const {\n        candyMachine,\n        goLiveDate,\n        itemsAvailable,\n        itemsRemaining,\n        //itemsRedeemed,\n      } = await getCandyMachineState(\n        wallet as anchor.Wallet,\n        props.candyMachineId,\n        props.connection\n      );\n\n      setItemsAvailable(itemsAvailable);\n      setItemsRemaining(itemsRemaining);\n      //setItemsRedeemed(itemsRedeemed);\n      setIsActive(false);\n\n      setIsSoldOut(itemsRemaining === 0);\n      setStartDate(goLiveDate);\n      setCandyMachine(candyMachine);\n    })();\n  }, [wallet, props.candyMachineId, props.connection]);\n\n  return (\n    <main>\n      {wallet && (\n        <p>Wallet {shortenAddress(wallet.publicKey.toBase58() || \"\")}</p>\n      )}\n\n      {wallet && <p>Balance: {(balance || 0).toLocaleString()} SOL</p>}\n\n      {wallet && <p>Total Available: {itemsRemaining} / {itemsAvailable}</p>}\n\n\n      <MintContainer>\n        {!wallet ? (\n          <ConnectButton>Connect Wallet</ConnectButton>\n        ) : (\n          <MintButton\n            disabled={isSoldOut || isMinting || !isActive}\n            onClick={onMint}\n            variant=\"contained\"\n          >\n            { \n            isSoldOut ? (\n              \"SOLD OUT\"\n            ) : isActive ? (\n              isMinting ? (\n                <CircularProgress />\n              ) : (\n                \"MINT\"\n              )\n            ) : (\n              <Countdown\n                date={startDate}\n                onMount={({ completed }) => completed && setIsActive(true)}\n                onComplete={() => setIsActive(true)}\n                renderer={renderCounter}\n              />\n            )}\n          </MintButton>\n        )}\n      </MintContainer>\n\n      <Snackbar\n        open={alertState.open}\n        autoHideDuration={6000}\n        onClose={() => setAlertState({ ...alertState, open: false })}\n      >\n        <Alert\n          onClose={() => setAlertState({ ...alertState, open: false })}\n          severity={alertState.severity}\n        >\n          {alertState.message}\n        </Alert>\n      </Snackbar>\n    </main>\n  );\n};\n\ninterface AlertState {\n  open: boolean;\n  message: string;\n  severity: \"success\" | \"info\" | \"warning\" | \"error\" | undefined;\n}\n\nconst renderCounter = ({ days, hours, minutes, seconds, completed }: any) => {\n  return (\n    <CounterText>\n      {days} Days ,{hours} hours, {minutes} minutes, {seconds} seconds\n    </CounterText>\n  );\n};\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}